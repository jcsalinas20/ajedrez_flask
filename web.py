#Python
from flask import Flask, render_template, request
app = Flask(__name__)

lastPositionX = 0
lastPositionY = "A"

def img_tower():
    return "data:image/png;base64,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"

@app.route('/')
def index():
    global lastPositionX, lastPositionY
    validLetters = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H']
    x = request.args.get("x", default = "1", type = str)
    y = request.args.get("y", default = "A", type = str).upper()
    validPosition = False
    msg = "Movimiento no permitido. "
    if y in validLetters and ((int(x)-1) >= 0 and (int(x)-1) <= 7):
        if lastPositionX==int(x)-1 or lastPositionY==y:
            lastPositionX = int(x)-1
            lastPositionY = y
            validPosition = True
        else:
            msg += x+"x"+y
    else:
        msg += x+"x"+y

    return render_template('index.html', len=10, letters=['', 'H', 'G', 'F', 'E', 'D', 'C', 'B', 'A', ''], img_tower=img_tower(), positionX=lastPositionX, positionY=lastPositionY, validPosition=validPosition, msg=msg)
 
if __name__ == '__main__':
    app.run(debug=True)